# --- non-interactive setup ---
DOTFILES="$HOME/.config"
export DOTFILES

if [ -f "$DOTFILES/profile/_env_functions" ]; then
    . "$DOTFILES/profile/_env_functions"
else
    echo "ERROR: _env_functions does not exist, environment setup may fail!"
fi

_env_source \
    "$HOME/.profile_local" \
    "$DOTFILES/profile/environment" \
    "$DOTFILES/profile/environment_$DOTFILES_OS"

# --- interactive setup ---
case "$-" in
    *i*)
        _env_debug "setup interactive"
        for file in functions aliases; do
            _env_source "$DOTFILES/profile/$file" "$DOTFILES/profile/${file}_$DOTFILES_OS"
        done

        if _env_is_bash; then
            _env_debug "setup bash"
            _env_source "$DOTFILES/bash/bashrc"
        fi

        _env_debug "setup os"
        _env_source "$DOTFILES/$DOTFILES_OS"/*

        _env_debug "setup shell"
        _env_source "$DOTFILES"/shell/*
        ;;
esac

unset file

# clear _env_functions
_env_run_after
_env_cleanup


