# vim: ft=sh

# load helper
. "${_ENV_CONFIG_DIR:-$HOME/.config/dotfiles}/helper" || echo "ERROR: unable to load helper, environment setup may fail!"

_env_debug "profile"
_env_source "$_ENV_CONFIG_DIR/common_profile"

case "$-" in
    *i*)
        _env_debug "interactive"
        for file in aliases functions ${_ENV_OS}_rc; do
            _env_source "$_ENV_CONFIG_DIR/$file"
        done
        unset file

        _env_debug "utils"
        _env_source "$_ENV_CONFIG_DIR/utils"/*

        # simple posix PS
        if [ -n "$PS1" ]; then
            PS1="\u@\h \w \\$ "
            PS2="-> "
        fi
        ;;
esac

# unload helper
_env_run_after
_env_cleanup
