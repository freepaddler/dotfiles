if [ -d "$HOME/.config/yandex-cloud" ]; then
    _env_cmd yc ||
        alias yc="docker run -it --rm -v \"$HOME/.config/yandex-cloud\":/root/.config/yandex-cloud yc "
fi

_env_cmd yc || return 0
alias yc-profile-list='yc config profile list'
alias yc-profile-set='yc config profile activate'
alias yc-init='yc init'
yc-token() {
    YC_TOKEN="$(yc iam create-token | head -n 1)"
    export YC_TOKEN=${YC_TOKEN%$'\r'}
    YC_CLOUD_ID="$(yc config get cloud-id)"
    export YC_CLOUD_ID=${YC_CLOUD_ID%$'\r'}
    YC_FOLDER_ID="$(yc config get folder-id)"
    export YC_FOLDER_ID=${YC_FOLDER_ID%$'\r'}
}
yc-update() {
    if [ -f "$HOME/.config/yandex-cloud/Dockerfile" ] && command -v docker >/dev/null 2>&1; then
        docker build --no-cache -t yc --file "$HOME/.config/yandex-cloud/Dockerfile" "$HOME/.config/yandex-cloud"
    else
        yc components update
    fi
}
